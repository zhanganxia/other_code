<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="stylesheet" href="./css/main1.css">
    <title>practice03</title>
    <script type="text/javascript">
        // 
        //         请写出代码，实现：
        //         1、点击“弹出弹框按钮”显示弹框
        // 		2、弹框显示后，实现秒数的倒计时，秒数为0时自动隐藏弹框
        // 		3、倒计时过程中点击“X”按钮可以隐藏弹框
        //
        window.onload = function() {
            var oInput = document.getElementById("btn01"),
                oPop = document.getElementById("pop"),
                oPopTime = document.getElementById("count"),
                oShut = document.getElementById("shutoff"),
                iPop = 1;

            // 1.点击按钮，弹出弹框
            oInput.onclick = function() {
                // 1.1修改oPop的属性display的属性值
                oPop.style.display = 'block';

                var iTime = 5;
                var popTimer = setInterval(popTime, 1000);

                function popTime() {
                    // 2.定时器执行倒计时
                    iTime -= iPop;

                    // 点击关闭按钮
                    oShut.onclick = function() {
                        oPop.style.display = 'none';
                        clearInterval(popTimer);
                        oPopTime.innerHTML = '<span id="count">' + '5' + '</span>';
                    }

                    if (iTime >= 0) {
                        // 
                        // 3.将倒计时的数据更改显示到页面
                        oPopTime.innerHTML = '<span id="count">' + iTime + '</span>';

                    } else if (iTime < 0) {
                        // 4.倒计时5个数之后关闭弹窗，关闭定时器
                        oPop.style.display = 'none';
                        console.log('时间不够了');

                        clearInterval(popTimer);
                        oPopTime.innerHTML = '<span id="count">' + '5' + '</span>';
                    }

                }
            }
        }
    </script>
</head>

<body>
    <input type="button" value="弹出弹框" id="btn01">
    <div class="pop_main" id="pop">
        <div class="pop_con">
            <div class="pop_title">
                <h3>系统提示</h3>
                <a href="#" id="shutoff">×</a>
            </div>
            <div class="pop_detail">
                <p class="pop_text">亲！请关注近期的优惠活动！</p>
            </div>
            <div class="pop_footer">
                还有<span id="count">5</span>秒自动关闭弹框
            </div>
        </div>
        <div class="mask"></div>
    </div>
</body>

</html>